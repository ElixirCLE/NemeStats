var Namespace=function(){var e={},t=[],n=function(e){return"object"==typeof e&&e.sort?e:Array(e)},r=function(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(n){try{e=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(o){throw new Error("This browser does not support XMLHttpRequest.")}}}}}return e},i=function(e){return e>=200&&300>e||304==e||1223==e||!e&&("file:"==window.location.protocol||"chrome:"==window.location.protocol)},o=function(e){var t=document.createElement("script");if(t.type="text/javascript",t.text=e,"object"==typeof window.execScript)window.execScript(e);else try{document.body.appendChild(t)}catch(n){window.eval(e)}},a=function(t,n){if(e[t]){n.event=t;for(var r=0;r<e[t].length;r++)e[t][r](n)}},u=function(e){var t=arguments[1]||!1,n=window;if(""!==e)for(var r=e.split(Namespace.separator),i=0;i<r.length;i++)n[r[i]]||(n[r[i]]={}),n=n[r[i]];if(t)for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return a("create",{identifier:e}),n};u.exist=function(e){if(""===e)return!0;for(var t=e.split(Namespace.separator),n=window,r=0;r<t.length;r++){if(!n[t[r]])return!1;n=n[t[r]]}return!0},u.mapIdentifierToUri=function(e){var t=new RegExp("\\"+Namespace.separator,"g");return Namespace.baseUri+e.replace(t,"/")+".js"};var c=function(e){var t=arguments[1],n=arguments[2],c="function"==typeof t,s=u.mapIdentifierToUri(e),f={identifier:e,uri:s,async:c,callback:t},p=r();return p.open("GET",s,c),c&&(p.onreadystatechange=function(){if(4==p.readyState){if(i(p.status||0))return o(p.responseText),a("include",f),void t();f.status=p.status,a("includeError",f),"function"==typeof n&&n()}}),p.send(null),c?void 0:i(p.status||0)?(o(p.responseText),a("include",f),!0):(f.status=p.status,a("includeError",f),!1)};return u.include=function(e){var n=arguments[1]||!1,r=arguments[2]||!1;return t[e]?("function"==typeof n&&n(),!0):n?void c(e,function(){t[e]=!0,n()},r):c(e)?(t[e]=!0,!0):!1},u.use=function(e){for(var t,r,i,o=n(e),c=arguments[1]||!1,s=arguments.length>2?arguments[2]:Namespace.autoInclude,f={identifier:e},p=0;p<o.length;p++)if(e=o[p],t=e.split(Namespace.separator),r=t.pop(),i=u(t.join(Namespace.separator)),"*"==r)for(var d in i)i.hasOwnProperty(d)&&(window[d]=i[d]);else if(i[r])window[r]=i[r];else if(s){if(c)return void u.include(e,function(){window[r]=i[r],p+1<o.length?u.unpack(o.slice(p+1),c,s):(a("use",f),"function"==typeof c&&c())});u.include(e),window[r]=i[r]}a("use",f),"function"==typeof c&&c()},u.from=function(e){return{include:function(){var t=arguments[0]||!1;u.include(e,t)},use:function(t){var n=arguments[1]||!1;"."==t.charAt(0)&&(t=e+t),n?u.include(e,function(){u.use(t,n,!1)}):(u.include(e),u.use(t,n,!1))}}},u.provide=function(e){for(var r=n(e),i=0;i<r.length;i++)e in t||(a("provide",{identifier:e}),t[e]=!0)},u.addEventListener=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},u.removeEventListener=function(t,n){if(e[t])for(var r=0;r<e[t].length;r++)if(e[t][r]==n)return void delete e[t][r]},u.registerNativeExtensions=function(){String.prototype.namespace=function(){var e=arguments[0]||{};return u(this.valueOf(),e)},String.prototype.include=function(){var e=arguments[0]||!1;return u.include(this.valueOf(),e)},String.prototype.use=function(){var e=arguments[0]||!1;return u.use(this.valueOf(),e)},String.prototype.from=function(){return u.from(this.valueOf())},String.prototype.provide=function(){return u.provide(this.valueOf())},Array.prototype.use=function(){var e=arguments[0]||!1;return u.use(this,e)},Array.prototype.provide=function(){return u.provide(this)}},u}();Namespace.separator=".",Namespace.baseUri="./",Namespace.autoInclude=!0;